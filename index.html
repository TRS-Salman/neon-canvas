<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Sketch | UGC Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0a0a; touch-action: none; overflow: hidden; }
        canvas { cursor: crosshair; filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.1)); }
        .toolbar { background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen">

    <div class="toolbar fixed top-6 flex items-center space-x-6 px-6 py-3 rounded-2xl border border-white/10 z-10 shadow-2xl">
        <div class="flex flex-col">
            <label class="text-[10px] text-stone-500 uppercase font-bold mb-1">Brush Color</label>
            <input type="color" id="colorPicker" value="#00f2ff" class="bg-transparent border-none w-10 h-10 cursor-pointer">
        </div>
        
        <div class="flex flex-col">
            <label class="text-[10px] text-stone-500 uppercase font-bold mb-1">Brush Size</label>
            <input type="range" id="sizePicker" min="1" max="50" value="5" class="accent-cyan-400">
        </div>

        <button onclick="clearCanvas()" class="bg-red-500/20 text-red-500 px-4 py-2 rounded-lg text-xs font-bold hover:bg-red-500 hover:text-white transition">Clear Canvas</button>
        <button onclick="downloadImage()" class="bg-cyan-500/20 text-cyan-500 px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 hover:text-white transition">Export PNG</button>
    </div>

    <canvas id="paintCanvas"></canvas>

    <script>
        const canvas = document.getElementById('paintCanvas');
        const ctx = canvas.getContext('2d');
        const colorPicker = document.getElementById('colorPicker');
        const sizePicker = document.getElementById('sizePicker');

        let painting = false;

        // Engine: Resize to Window
        function init() {
            canvas.width = window.innerWidth * 0.9;
            canvas.height = window.innerHeight * 0.8;
            
            // Set Canvas Background
            ctx.fillStyle = "#0a0a0a";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Default Line Settings
            ctx.lineCap = "round";
            ctx.lineJoin = "round";
        }

        // Logic: Start Drawing
        function startPosition(e) {
            painting = true;
            draw(e); // Allow single dots
        }

        // Logic: Stop Drawing
        function finishedPosition() {
            painting = false;
            ctx.beginPath(); // Reset the path so lines don't connect across jumps
        }

        // Logic: The Draw Loop
        function draw(e) {
            if (!painting) return;

            // Handle touch or mouse
            const x = e.clientX || e.touches[0].clientX;
            const y = e.clientY || e.touches[0].clientY;
            
            // Calculate coordinates relative to canvas position
            const rect = canvas.getBoundingClientRect();
            const posX = x - rect.left;
            const posY = y - rect.top;

            ctx.lineWidth = sizePicker.value;
            ctx.strokeStyle = colorPicker.value;

            // Add Neon Glow Effect
            ctx.shadowColor = colorPicker.value;
            ctx.shadowBlur = 15;

            ctx.lineTo(posX, posY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(posX, posY);
        }

        // Utility: Clear
        function clearCanvas() {
            ctx.fillStyle = "#0a0a0a";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Utility: Export
        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'neon-masterpiece.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Event Listeners
        window.addEventListener('mousedown', startPosition);
        window.addEventListener('mouseup', finishedPosition);
        window.addEventListener('mousemove', draw);
        
        // Touch Support for Mobile
        window.addEventListener('touchstart', (e) => { startPosition(e); e.preventDefault(); }, {passive: false});
        window.addEventListener('touchend', finishedPosition);
        window.addEventListener('touchmove', (e) => { draw(e); e.preventDefault(); }, {passive: false});

        window.addEventListener('resize', init);
        
        init();
    </script>
</body>
</html>
